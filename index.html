<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Blackjack</title>
<style>
    body {
        margin: 0;
        padding: 0;
        background: #0b6b2a;
        font-family: Arial, sans-serif;
        color: white;
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    #side {
        width: 220px;
        padding: 20px;
    }

    #balanceDisplay {
        background: white;
        color: black;
        font-size: 22px;
        padding: 10px 18px;
        border-radius: 12px;
        display: inline-block;
        margin-bottom: 20px;
        box-shadow: 0px 2px 10px rgba(0,0,0,0.4);
    }

    #chips {
        margin-top: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
    }

    .chip {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        font-weight: bold;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 4px solid white;
        box-shadow: 0px 0px 10px rgba(0,0,0,0.5);
        user-select: none;
    }

    /* Vegas colors */
    .chip-1   { background: white; color: black; }
    .chip-5   { background: #d40000; }
    .chip-25  { background: #0da400; }
    .chip-50  { background: #0050ff; }
    .chip-100 { background: black; }
    .chip-500 { background: #7b00a8; }

    #table {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #gameArea {
        background: rgba(0,0,0,0.2);
        width: 70%;
        height: 82%;
        border-radius: 25px;
        padding: 25px;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        box-shadow: 0px 0px 20px rgba(0,0,0,0.4);
    }

    .handArea {
        min-height: 120px;
        display: flex;
        justify-content: center;
        gap: 10px;
    }

    .card {
        width: 70px;
        height: 100px;
        background: white;
        border-radius: 6px;
        color: black;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
    }

    button {
        padding: 10px 15px;
        font-size: 18px;
        border: none;
        cursor: pointer;
        border-radius: 10px;
        margin: 0 6px;
    }

    #controls {
        margin-bottom: 10px;
    }

    #status {
        margin-top: 10px;
        font-size: 20px;
        min-height: 30px;
    }
</style>
</head>
<body>

<div id="side">
    <div id="balanceDisplay">Balance: $100</div>

    <h3>Chips</h3>
    <div id="chips"></div>

    <h3>Bet: <span id="betDisplay">$0</span></h3>
    <button id="placeBetBtn">Place Bet</button>
</div>

<div id="table">
    <div id="gameArea">
        
        <div>
            <h2>Dealer</h2>
            <div id="dealerHand" class="handArea"></div>
        </div>

        <div>
            <h2>Player</h2>
            <div id="playerHand" class="handArea"></div>
        </div>

        <div id="controls">
            <button id="dealBtn">Deal</button>
            <button id="hitBtn" disabled>Hit</button>
            <button id="standBtn" disabled>Stand</button>
            <button id="resetBtn">Reset</button>
        </div>

        <div id="status">Welcome — choose chips and place a bet</div>
    </div>
</div>

<script>
let balance = 100;
let bet = 0;
let deck = [];
let dealer = [];
let player = [];
let inRound = false;

// DOM references
const balanceEl = document.getElementById("balanceDisplay");
const betEl = document.getElementById("betDisplay");
const dealerHandEl = document.getElementById("dealerHand");
const playerHandEl = document.getElementById("playerHand");
const statusEl = document.getElementById("status");

document.getElementById("placeBetBtn").onclick = placeBet;
document.getElementById("dealBtn").onclick = deal;
document.getElementById("hitBtn").onclick = hit;
document.getElementById("standBtn").onclick = stand;
document.getElementById("resetBtn").onclick = resetGame;

// Build chips
const chipValues = [1, 5, 25, 50, 100, 500];
const chipsDiv = document.getElementById("chips");

chipValues.forEach(v => {
    const c = document.createElement("div");
    c.className = `chip chip-${v}`;
    c.textContent = `$${v}`;
    c.onclick = () => addChip(v);
    chipsDiv.appendChild(c);
});

function addChip(v) {
    if (inRound) return;
    bet += v;
    updateBetDisplay();
}

function updateBetDisplay() {
    betEl.textContent = `$${bet}`;
}

function placeBet() {
    if (bet < 1) {
        statusEl.textContent = "You must place a bet first.";
        return;
    }
    statusEl.textContent = "Bet placed. Press Deal.";
}

function resetDeck() {
    deck = [];
    const suits = ["♣","♦","♥","♠"];
    const vals = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];

    for (let s of suits) {
        for (let v of vals) {
            deck.push({value: v, suit: s});
        }
    }

    // Shuffle
    for (let i = deck.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
}

function draw() {
    return deck.pop();
}

function valueOf(card) {
    if (["J","Q","K"].includes(card.value)) return 10;
    if (card.value === "A") return 11;
    return parseInt(card.value);
}

function handValue(h) {
    let total = h.reduce((t, c) => t + valueOf(c), 0);
    let aces = h.filter(c => c.value === "A").length;
    while (total > 21 && aces--) total -= 10;
    return total;
}

function renderHand(el, hand) {
    el.innerHTML = "";
    hand.forEach(card => {
        let c = document.createElement("div");
        c.className = "card";
        c.textContent = `${card.value}${card.suit}`;
        el.appendChild(c);
    });
}

function deal() {
    if (inRound) return;
    if (bet < 1) {
        statusEl.textContent = "Place a bet first.";
        return;
    }

    inRound = true;
    dealer = [];
    player = [];

    resetDeck();

    player.push(draw(), draw());
    dealer.push(draw(), draw());

    renderAll();
    statusEl.textContent = "Hit or Stand?";
}

function renderAll() {
    renderHand(playerHandEl, player);
    renderHand(dealerHandEl, dealer);

    balanceEl.textContent = `Balance: $${balance}`;

    document.getElementById("hitBtn").disabled = !inRound;
    document.getElementById("standBtn").disabled = !inRound;
}

function hit() {
    if (!inRound) return;

    player.push(draw());
    renderAll();

    if (handValue(player) > 21) {
        endRound("bust");
    }
}

function stand() {
    if (!inRound) return;
    dealerPlay();
}

function dealerPlay() {
    while (handValue(dealer) < 17) {
        dealer.push(draw());
    }
    endRound("resolve");
}

function endRound(reason) {
    inRound = false;

    let p = handValue(player);
    let d = handValue(dealer);

    let msg = "";

    if (reason === "bust") {
        msg = `You bust and lose $${bet}`;
        balance -= bet;
    } 
    else {
        if (d > 21 || p > d) {
            msg = `You win $${bet}`;
            balance += bet;
        } else if (p === d) {
            msg = "Push — bet returned";
        } else {
            msg = `You lose $${bet}`;
            balance -= bet;
        }
    }

    bet = 0;
    updateBetDisplay();

    renderAll();
    statusEl.textContent = msg;
}

function resetGame() {
    balance = 100;
    bet = 0;
    updateBetDisplay();
    dealer = [];
    player = [];
    renderAll();
    statusEl.textContent = "Welcome — choose chips and place a bet";
}
</script>

</body>
</html>
